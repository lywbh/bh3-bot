package com.lyw.module;import com.lyw.util.JsonUtils;import com.lyw.util.RandomUtils;import com.lyw.vo.BdTranslateResp;import com.xiaoleilu.hutool.http.HttpUtil;import lombok.extern.slf4j.Slf4j;import org.apache.commons.codec.digest.DigestUtils;import org.apache.commons.lang3.StringUtils;import java.util.HashMap;import java.util.Map;/** * Created by yiweiliang. * User: yiweiliang1 * Date: 2018/4/3 */@Slf4jpublic class TranslateModule {    private static String bdUrl = "http://api.fanyi.baidu.com/api/trans/vip/translate";    private static String appid = "";    private static String password = "";    private static int timeOut = 3000;    public static String translate(String message) {        try {            String q = StringUtils.substring(message, StringUtils.indexOf(message, " ") + 1);            if (StringUtils.isBlank(q)) {                return "格式不对哟QwQ";            }            Map<String, Object> map = new HashMap<>();            map.put("q", q);            map.put("from", "auto");            map.put("to", "zh");            map.put("appid", appid);            int salt = RandomUtils.nextIntByRange(1024);            String sign = DigestUtils.md5Hex(appid + q + salt + password);            map.put("salt", salt);            map.put("sign", sign);            String resp = HttpUtil.post(bdUrl, map, timeOut);            BdTranslateResp respVo = JsonUtils.toObject(resp, BdTranslateResp.class);            if (respVo != null                    && respVo.getTrans_result() != null                    && !respVo.getTrans_result().isEmpty()) {                return respVo.getTrans_result().get(0).getDst();            } else {                return "我不知道这是什么意思QwQ";            }        } catch (Throwable e) {            log.error("百度翻译异常：" + message, e);            return "翻译模块出现异常了QwQ";        }    }}